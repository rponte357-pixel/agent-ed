<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Agent ED: The Sound Code</title>
    <style>
        :root {
            --rojo: #ff4757;
            --amarillo: #ffa502;
            --verde: #2ed573;
            --oscuro: #1e2124;
            --tarjeta: #2f3136;
            --texto: #ffffff;
        }

        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }

        body {
            margin: 0;
            background-color: var(--oscuro);
            color: var(--texto);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .nav {
            position: fixed;
            bottom: 0;
            width: 100%;
            display: flex;
            background: #000;
            padding: 10px 0;
            z-index: 1000;
        }

        .nav-item {
            flex: 1;
            text-align: center;
            color: #8e9297;
            font-size: 0.8em;
            cursor: pointer;
        }

        .nav-item.active { color: var(--amarillo); }

        .content {
            flex: 1;
            padding: 20px;
            padding-bottom: 80px;
            overflow-y: auto;
        }

        .hidden { display: none !important; }

        .rule-card {
            background: var(--tarjeta);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 5px solid white;
            position: relative;
        }
        .rule-card.id { border-color: var(--rojo); }
        .rule-card.t { border-color: var(--amarillo); }
        .rule-card.d { border-color: var(--verde); }

        .btn-audio {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.1);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            font-size: 1.2em;
            color: white;
        }

        .verb-display {
            background: var(--tarjeta);
            height: 180px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 20px;
            font-size: 2.8em;
            font-weight: bold;
            margin-bottom: 30px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
            border: 2px solid #444;
            text-align: center;
            padding: 10px;
        }

        .choice-btn {
            width: 100%;
            padding: 18px;
            border: none;
            border-radius: 12px;
            color: white;
            font-size: 1.1em;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .btn-id { background: var(--rojo); }
        .btn-t { background: var(--amarillo); }
        .btn-d { background: var(--verde); }

        .stats-bar {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            background: rgba(255,255,255,0.05);
            padding: 10px;
            border-radius: 10px;
        }
    </style>
</head>
<body>

    <div class="content" id="manual-view">
        <h1 style="text-align: center; color: var(--amarillo);">游늬 Manual de Agente</h1>
        
        <div class="rule-card id">
            <button class="btn-audio" onclick="speak('Wanted, Decided, Started')">游댉</button>
            <h2>1. El sonido /톩d/ 游댮</h2>
            <p><b>Regla:</b> Si el verbo base termina en <b>T o D</b>.</p>
            <small>Ej: Wanted, Decided, Started...</small>
        </div>

        <div class="rule-card t">
            <button class="btn-audio" onclick="speak('Cooked, Watched, Helped')">游댉</button>
            <h2>2. El sonido /t/ 游리</h2>
            <p><b>Regla:</b> Termina en sonido sordo (<b>p, k, f, s, sh, ch, x</b>).</p>
            <small>Ej: Cooked, Watched, Helped...</small>
        </div>

        <div class="rule-card d">
            <button class="btn-audio" onclick="speak('Played, Ordered, Worried')">游댉</button>
            <h2>3. El sonido /d/ 游릭</h2>
            <p><b>Regla:</b> Termina en sonido sonoro o vocal.</p>
            <small>Ej: Played, Ordered, Worried...</small>
        </div>
    </div>

    <div class="content hidden" id="game-view">
        <div class="stats-bar">
            <span>Puntos: <b id="score">0</b></span>
            <span>Racha: <b id="streak">0</b>游댠</span>
        </div>
        <div id="verb-box" class="verb-display">AGENT READY</div>
        <div class="btn-grid">
            <button class="choice-btn btn-id" onclick="checkAnswer('id')"><span>/톩d/ (S칤laba Extra)</span> 游댮</button>
            <button class="choice-btn btn-t" onclick="checkAnswer('t')"><span>/t/ (Sordo)</span> 游리</button>
            <button class="choice-btn btn-d" onclick="checkAnswer('d')"><span>/d/ (Sonoro)</span> 游릭</button>
        </div>
    </div>

    <div class="nav">
        <div class="nav-item active" id="nav-manual" onclick="showView('manual')">游닀<br>Manual</div>
        <div class="nav-item" id="nav-game" onclick="showView('game')">游꿡<br>Jugar</div>
    </div>

    <script>
        const verbData = {
            id: ['Accepted', 'Added', 'Afforded', 'Collected', 'Completed', 'Counted', 'Decided', 'Defended', 'Depended', 'Doubted', 'Ended', 'Expanded', 'Expected', 'Guarded', 'Hated', 'Heated', 'Included', 'Intended', 'Invented', 'Landed', 'Lasted', 'Loaded', 'Needed', 'Objected', 'Planted', 'Pretended', 'Printed', 'Provided', 'Recorded', 'Regretted', 'Reminded', 'Reported', 'Requested', 'Started', 'Submitted', 'Supported', 'Tasted', 'Treated', 'Visited', 'Wanted'],
            t: ['Asked', 'Brushed', 'Clapped', 'Cooked', 'Crashed', 'Crossed', 'Danced', 'Developed', 'Dressed', 'Dropped', 'Escaped', 'Finished', 'Fixed', 'Guessed', 'Helped', 'Hiked', 'Hoped', 'Introduced', 'Jumped', 'Kicked', 'Laughed', 'Looked', 'Missed', 'Passed', 'Picked', 'Practiced', 'Pushed', 'Relaxed', 'Searched', 'Shopped', 'Skipped', 'Stopped', 'Talked', 'Touched', 'Washed', 'Watched', 'Worked'],
            d: ['Allowed', 'Answered', 'Belonged', 'Called', 'Changed', 'Cleaned', 'Climbed', 'Closed', 'Compared', 'Covered', 'Damaged', 'Delayed', 'Enjoyed', 'Explained', 'Filled', 'Followed', 'Happened', 'Imagined', 'Joined', 'Killed', 'Listened', 'Lived', 'Loved', 'Managed', 'Measured', 'Moved', 'Named', 'Opened', 'Ordered', 'Planned', 'Played', 'Pulled', 'Realized', 'Remembered', 'Saved', 'Shared', 'Signed', 'Stayed', 'Traveled', 'Tried', 'Used', 'Worried']
        };

        let score = 0, streak = 0, currentVerb = "", currentCat = "";

        function speak(text) {
            const msg = new SpeechSynthesisUtterance(text);
            msg.lang = 'en-US';
            window.speechSynthesis.speak(msg);
        }

        function showView(view) {
            document.getElementById('manual-view').classList.toggle('hidden', view !== 'manual');
            document.getElementById('game-view').classList.toggle('hidden', view !== 'game');
            document.getElementById('nav-manual').classList.toggle('active', view === 'manual');
            document.getElementById('nav-game').classList.toggle('active', view === 'game');
            if(view === 'game') nextVerb();
        }

        function nextVerb() {
            const cats = ['id', 't', 'd'];
            currentCat = cats[Math.floor(Math.random() * 3)];
            currentVerb = verbData[currentCat][Math.floor(Math.random() * verbData[currentCat].length)];
            document.getElementById('verb-box').textContent = currentVerb.toUpperCase();
            document.getElementById('verb-box').style.color = "white";
            speak(currentVerb);
        }

        function checkAnswer(userChoice) {
            if(userChoice === currentCat) {
                score += 10 + (streak * 2);
                streak++;
            } else {
                streak = 0;
                document.getElementById('verb-box').style.color = "var(--rojo)";
            }
            document.getElementById('score').textContent = score;
            document.getElementById('streak').textContent = streak;
            setTimeout(nextVerb, 800);
        }
    </script>
</body>
</html>
