<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Agent ED: Training Center</title>
    <style>
        :root {
            --rojo: #ff4757;
            --amarillo: #ffa502;
            --verde: #2ed573;
            --oscuro: #1e2124;
            --tarjeta: #ffffff;
            --texto: #333333;
            --fondo-gradiente: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; font-family: 'Segoe UI', Tahoma, sans-serif; }
        
        body { 
            margin: 0; 
            background: var(--fondo-gradiente); 
            color: var(--texto); 
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Navegaci칩n Estilo Premium */
        .nav { 
            position: fixed; 
            bottom: 0; 
            width: 100%; 
            display: flex; 
            background: white; 
            padding: 12px 0; 
            box-shadow: 0 -5px 20px rgba(0,0,0,0.2);
            z-index: 1000;
        }
        .nav-item { 
            flex: 1; 
            text-align: center; 
            color: #777; 
            font-size: 0.9em; 
            cursor: pointer;
            font-weight: bold;
        }
        .nav-item.active { color: #764ba2; transform: scale(1.1); }

        .content { 
            flex: 1; 
            padding: 20px; 
            padding-bottom: 90px; 
            max-width: 1000px; 
            margin: 0 auto; 
            width: 100%;
        }
        .hidden { display: none !important; }

        /* Tarjetas de Manual */
        .rule-card { 
            background: white; 
            border-radius: 15px; 
            padding: 20px; 
            margin-bottom: 20px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border-left: 8px solid;
        }
        .id-style { border-color: var(--rojo); }
        .t-style { border-color: var(--amarillo); }
        .d-style { border-color: var(--verde); }

        /* Fichas de Pr치ctica (Integradas del segundo c칩digo) */
        .practice-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); 
            gap: 15px; 
            margin-top: 15px; 
        }
        .verb-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: transform 0.2s;
            cursor: pointer;
        }
        .verb-card:active { transform: scale(0.95); }
        .verb-card b { display: block; font-size: 1.2em; margin-bottom: 10px; }
        .play-icon { font-size: 1.5em; color: #764ba2; }

        /* Estilos de Juego */
        .game-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
        }
        .verb-display { 
            font-size: 3em; 
            font-weight: bold; 
            margin: 20px 0;
            color: #333;
        }
        .timer-container { width: 100%; height: 10px; background: #eee; border-radius: 5px; margin: 20px 0; overflow: hidden; }
        .timer-bar { height: 100%; width: 100%; background: var(--amarillo); transition: width 0.1s linear; }
        
        .choice-btn { 
            width: 100%; 
            padding: 20px; 
            border: none; 
            border-radius: 15px; 
            color: white; 
            font-size: 1.2em; 
            font-weight: bold; 
            margin-bottom: 15px;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>

    <div class="content" id="manual-view">
        <h1 style="text-align: center; color: white;">游닀 Gu칤a de Pronunciaci칩n</h1>
        <div class="rule-card id-style">
            <h2 style="color: var(--rojo)">Grupo /톩d/ (S칤laba Extra)</h2>
            <p>Se a침ade una s칤laba nueva al final. Solo ocurre si el verbo termina en sonido <b>T</b> o <b>D</b>.</p>
            <small>Ejemplos: Want-ed, Need-ed</small>
        </div>
        <div class="rule-card t-style">
            <h2 style="color: var(--amarillo)">Grupo /t/ (Sonido Sordo)</h2>
            <p>La terminaci칩n suena como una "T" seca. Ocurre tras sonidos sin vibraci칩n: <b>P, K, F, S, SH, CH, X</b>.</p>
        </div>
        <div class="rule-card d-style">
            <h2 style="color: var(--verde)">Grupo /d/ (Sonido Sonoro)</h2>
            <p>La terminaci칩n suena como una "D" suave. Ocurre tras sonidos que vibran o <b>vocales</b>.</p>
        </div>
    </div>

    <div class="content hidden" id="practice-view">
        <h1 style="text-align: center; color: white;">游꿢 Centro de Pr치ctica</h1>
        
        <h2 style="color: white; background: var(--rojo); padding: 10px; border-radius: 10px;">Sonido /톩d/</h2>
        <div id="grid-id" class="practice-grid"></div>

        <h2 style="color: white; background: var(--amarillo); padding: 10px; border-radius: 10px; margin-top: 30px;">Sonido /t/</h2>
        <div id="grid-t" class="practice-grid"></div>

        <h2 style="color: white; background: var(--verde); padding: 10px; border-radius: 10px; margin-top: 30px;">Sonido /d/</h2>
        <div id="grid-d" class="practice-grid"></div>
    </div>

    <div class="content hidden" id="game-view">
        <div class="game-container">
            <div style="display:flex; justify-content:space-between; margin-bottom:10px; font-weight:bold;">
                <span>Puntos: <span id="score">0</span></span>
                <span>Racha: <span id="streak">0</span>游댠</span>
            </div>
            <div class="timer-container"><div id="timer-bar" class="timer-bar"></div></div>
            <div id="verb-box" class="verb-display">READY?</div>
            <button class="choice-btn" style="background:var(--rojo)" onclick="checkAnswer('id')">Sonido /톩d/</button>
            <button class="choice-btn" style="background:var(--amarillo)" onclick="checkAnswer('t')">Sonido /t/</button>
            <button class="choice-btn" style="background:var(--verde)" onclick="checkAnswer('d')">Sonido /d/</button>
        </div>
    </div>

    <div class="nav">
        <div class="nav-item active" id="nav-manual" onclick="showView('manual')">MANUAL</div>
        <div class="nav-item" id="nav-practice" onclick="showView('practice')">PR츼CTICA</div>
        <div class="nav-item" id="nav-game" onclick="showView('game')">JUEGO</div>
    </div>

    <script>
        // CONFIGURACI칍N DE RUTA DE AUDIOS
        // Cambia esto a la direcci칩n de tu carpeta de audios en GitHub
        const BASE_AUDIO_URL = 'https://rponte357-pixel.github.io/agent-ed/'; 

        const verbData = {
            id: ['Accepted', 'Added', 'Afforded', 'Collected', 'Completed', 'Counted', 'Decided', 'Defended', 'Depended', 'Doubted', 'Ended', 'Expanded', 'Expected', 'Guarded', 'Hated', 'Heated', 'Included', 'Intended', 'Invented', 'Landed', 'Lasted', 'Loaded', 'Needed', 'Objected', 'Planted', 'Pretended', 'Printed', 'Provided', 'Recorded', 'Regretted', 'Reminded', 'Reported', 'Requested', 'Started', 'Submitted', 'Supported', 'Tasted', 'Treated', 'Visited', 'Wanted'],
            t: ['Asked', 'Brushed', 'Clapped', 'Cooked', 'Crashed', 'Crossed', 'Danced', 'Developed', 'Dressed', 'Dropped', 'Escaped', 'Finished', 'Fixed', 'Guessed', 'Helped', 'Hiked', 'Hoped', 'Introduced', 'Jumped', 'Kicked', 'Laughed', 'Looked', 'Missed', 'Passed', 'Picked', 'Practiced', 'Pushed', 'Relaxed', 'Searched', 'Shopped', 'Skipped', 'Stopped', 'Talked', 'Touched', 'Washed', 'Watched', 'Worked'],
            d: ['Allowed', 'Answered', 'Belonged', 'Called', 'Changed', 'Cleaned', 'Climbed', 'Closed', 'Compared', 'Covered', 'Damaged', 'Delayed', 'Enjoyed', 'Explained', 'Filled', 'Followed', 'Happened', 'Imagined', 'Joined', 'Killed', 'Listened', 'Lived', 'Loved', 'Managed', 'Measured', 'Moved', 'Named', 'Opened', 'Ordered', 'Planned', 'Played', 'Pulled', 'Realized', 'Remembered', 'Saved', 'Shared', 'Signed', 'Stayed', 'Traveled', 'Tried', 'Used', 'Worried']
        };

        let score = 0, streak = 0, currentCat = "", timerInterval, timeLeft;

        // Funci칩n para reproducir audio MP3 REAL
        function playRealAudio(verb) {
            const audio = new Audio(`${BASE_AUDIO_URL}${verb}.mp3`);
            audio.play().catch(e => {
                console.log(`Audio no encontrado para: ${verb}. Usando voz de respaldo.`);
                // Solo si el MP3 falla, usamos la voz met치lica para que no se quede mudo
                const msg = new SpeechSynthesisUtterance(verb);
                msg.lang = 'en-US';
                window.speechSynthesis.speak(msg);
            });
        }

        function showView(v) {
            document.querySelectorAll('.content').forEach(c => c.classList.add('hidden'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.getElementById(`${v}-view`).classList.remove('hidden');
            document.getElementById(`nav-${v}`).classList.add('active');
            clearInterval(timerInterval);
            if(v === 'practice') renderPractice();
            if(v === 'game') nextVerb();
        }

        function renderPractice() {
            ['id', 't', 'd'].forEach(cat => {
                const grid = document.getElementById(`grid-${cat}`);
                grid.innerHTML = "";
                verbData[cat].forEach(verb => {
                    const card = document.createElement('div');
                    card.className = 'verb-card';
                    card.innerHTML = `<b>${verb}</b><span class="play-icon">游댉</span>`;
                    card.onclick = () => playRealAudio(verb);
                    grid.appendChild(card);
                });
            });
        }

        function nextVerb() {
            clearInterval(timerInterval);
            const cats = ['id', 't', 'd'];
            currentCat = cats[Math.floor(Math.random() * 3)];
            const verb = verbData[currentCat][Math.floor(Math.random() * verbData[currentCat].length)];
            document.getElementById('verb-box').textContent = verb.toUpperCase();
            document.getElementById('verb-box').style.color = "#333";
            playRealAudio(verb);
            startTimer();
        }

        function startTimer() {
            timeLeft = 5000;
            const bar = document.getElementById('timer-bar');
            timerInterval = setInterval(() => {
                timeLeft -= 100;
                bar.style.width = (timeLeft / 5000 * 100) + "%";
                if(timeLeft <= 0) { streak = 0; updateStats(); nextVerb(); }
            }, 100);
        }

        function checkAnswer(u) {
            if(u === currentCat) { score += 10 + (streak * 2); streak++; }
            else { streak = 0; document.getElementById('verb-box').style.color = "var(--rojo)"; }
            updateStats();
            setTimeout(nextVerb, 600);
        }

        function updateStats() {
            document.getElementById('score').textContent = score;
            document.getElementById('streak').textContent = streak;
        }

        window.onload = renderPractice;
    </script>
</body>
</html>
